'use strict'
var driver, driver_clone;
const fs=require('fs')
global.wd = require("wd") //加载wd
global.caps = require("../config/caps")
require("./dep") //加载函数库
require("../config/apps").androidApiDemos //加载需要安装的客户端
require("../function/promise-chain") //添加自定义方法
require('../function/setenv') //配置环境变量
require('./setup') //加载依赖环境
console.log(process.env.app_install_location)
function Driver() {
  driver = wd.promiseChainRemote(require("../server/appium-servers").local)
  require("../server/logging").configure(driver) //打印日志
  return driver
}
global.driver = new Driver //实例化一个对象
global.driver_clone = wd.promiseChainRemote(require("../server/appium-servers").remote)
var APP_LOCALATION = process.env['app_install_location']
if (!fs.existsSync(APP_LOCALATION)){
    console.log('临时变量存在问题，请检查'.yellow)
    process.exit(0)
}
console.log("立即初始化wd，并初始化一个实例对象   ok".green)